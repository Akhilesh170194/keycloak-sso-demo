<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>APP3</title>
    <link rel="stylesheet" href="../../css/styles.css">
    <script src="https://cdn.jsdelivr.net/npm/keycloak-js@24.0.5/dist/keycloak.min.js"></script>
</head>

<body>
    <script type="module">
        import { keycloakConfig } from '../../config.js';

        const keycloak = new Keycloak({
            url: keycloakConfig.url, // Keycloak server URL
            realm: keycloakConfig.realm, // Realm name
            clientId: keycloakConfig.app3_client_id // Client ID
        });

        keycloak.init({
            onLoad: 'login-required',
            redirectUri: 'http://127.0.0.1:8000/apps/app3/welcome.html'
        }).then(authenticated => {
            console.log(authenticated
                ? `Logged in as ${keycloak.tokenParsed.preferred_username}`
                : 'Not authenticated!');
        }).catch(err => console.error('Keycloak initialization error:', err));
    </script>
</body>

</html>